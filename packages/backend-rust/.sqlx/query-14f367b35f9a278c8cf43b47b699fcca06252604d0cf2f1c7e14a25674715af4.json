{
  "db_name": "PostgreSQL",
  "query": "\n        INSERT INTO \"algorithm_metrics_daily\"\n            (\"algorithmId\",\"day\",\"callCount\",\"totalLatencyUs\",\"errorCount\",\"lastCalledAt\",\"createdAt\",\"updatedAt\")\n        VALUES\n            ($1,$2,$3,$4,$5,$6,NOW(),NOW())\n        ON CONFLICT (\"algorithmId\",\"day\") DO UPDATE\n        SET\n            \"callCount\" = \"algorithm_metrics_daily\".\"callCount\" + EXCLUDED.\"callCount\",\n            \"totalLatencyUs\" = \"algorithm_metrics_daily\".\"totalLatencyUs\" + EXCLUDED.\"totalLatencyUs\",\n            \"errorCount\" = \"algorithm_metrics_daily\".\"errorCount\" + EXCLUDED.\"errorCount\",\n            \"lastCalledAt\" = CASE\n                WHEN \"algorithm_metrics_daily\".\"lastCalledAt\" IS NULL THEN EXCLUDED.\"lastCalledAt\"\n                WHEN EXCLUDED.\"lastCalledAt\" IS NULL THEN \"algorithm_metrics_daily\".\"lastCalledAt\"\n                ELSE GREATEST(\"algorithm_metrics_daily\".\"lastCalledAt\", EXCLUDED.\"lastCalledAt\")\n            END,\n            \"updatedAt\" = NOW()\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": ["Text", "Date", "Int8", "Int8", "Int8", "Timestamp"]
    },
    "nullable": []
  },
  "hash": "14f367b35f9a278c8cf43b47b699fcca06252604d0cf2f1c7e14a25674715af4"
}
