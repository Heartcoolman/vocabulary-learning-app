# WordMasteryDetailModal 功能展示

## 组件概览

`WordMasteryDetailModal` 是一个用于展示单词详细掌握度信息的模态框组件。

## 主要功能区块

### 1. 单词基本信息区

```
┌─────────────────────────────────────────────┐
│  hello                        [✓ 已掌握]     │
│  /hə��ləʊ/                                   │
│  1. 你好；喂                                 │
│  2. 打招呼                                   │
└─────────────────────────────────────────────┘
```

- 显示单词拼写（大字号、粗体）
- 音标信息
- 完整释义列表
- 掌握状态标签（颜色编码）

### 2. 掌握度评估区

```
┌─────────────────────────────────────────────┐
│  📊 掌握度评估                               │
│  ┌──────┬──────┬──────┬──────┐             │
│  │综合  │置信  │SRS   │近期  │             │
│  │得分  │度    │等级  │准确率│             │
│  │ 85   │ 92%  │  5   │ 88%  │             │
│  │[████]│      │      │      │             │
│  └──────┴──────┴──────┴──────┘             │
│                                             │
│  评估因素：                                  │
│  ACT-R 提取概率  [█████████░] 92%          │
│  用户疲劳度      [███░░░░░░░] 35%          │
│                                             ��
│  💡 学习建议                                │
│  继续保持！建议3天后复习以巩固记忆。         │
└─────────────────────────────────────────────┘
```

- 4个核心指标展示（网格布局）
- 进度条可视化
- 详细因素分析（ACT-R、疲劳度）
- AI生成的学习建议

### 3. 学习轨迹图表

```
┌─────────────────────────────────────────────┐
│  🔥 学习轨迹                                 │
│  共 25 次复习记录                            │
│  ┌─────────────────────────────────────┐   │
│  │     📈 记忆强度曲线图                 │   │
│  │  1.0┤                          ╱─╲   │   │
│  │     │                      ╱───    ╲ │   │
│  │  0.5┤            ╱────────          │   │
│  │     │    ╱───────                   │   │
│  │  0.0└───────────────────────────────│   │
│  │     1h  1d  3d  7d  14d  30d  60d   │   │
│  └─────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
```

- 使用 MemoryTraceChart 组件
- 显示记忆强度随时间变化
- 标注复习时间点
- 正确/错误状态颜色区分

### 4. 评估历史记录

```
┌─────────────────────────────────────────────┐
│  🕐 评估历史                                 │
│  ┌───────────────────────────────────────┐ │
│  │ ✓ 回答正确        2024-12-04 14:32    │ │
│  │   2.3s                                │ │
│  ├───────────────────────────────────────┤ │
│  │ ✗ 回答错误        2024-12-03 09:15    │ │
│  │   5.7s                                │ │
│  ├───────────────────────────────────────┤ │
│  │ ✓ 回答正确        2024-12-01 18:45    │ │
│  │   1.8s                                │ │
│  └───────────────────────────────────────┘ │
│  显示最近 10 条记录，共 25 条               │
└─────────────────────────────────────────────┘
```

- 最近10条学习记录
- 正确/错误图标标识
- 时间戳和响应时间
- 滚动查看更多
- 底部显示总记录数

### 5. 复习建议区

```
┌─────────────────────────────────────────────┐
│  🕐 复习建议                                 │
│  ┌────────┬────────────┬────────┐          │
│  │最小间隔│  最佳间隔   │最大间隔│          │
│  │  2天   │  【3天】    │  5天   │          │
│  └────────┴────────────┴────────┘          │
│  目标提取概率：90%                           │
└─────────────────────────────────────────────┘
```

- 基于遗忘曲线的智能预测
- 三种间隔选项（最小/最佳/最大）
- 最佳间隔突出显示
- 显示目标提取概率

## 状态处理

### Loading 状态

```
┌─────────────────────────────────────────────┐
│              ⚪ 加载中...                    │
│            (旋转动画)                        │
└─────────────────────────────────────────────┘
```

### 错误状态

```
┌─────────────────────────────────────────────┐
│              ⚠️ 加载数据失败                 │
│         请稍后重试                           │
│          [  重试  ]                         │
└─────────────────────────────────────────────┘
```

### 空数据状态

```
┌─────────────────────────────────────────────┐
│              ⚠️                             │
│         该单词暂无学习记录                    │
└─────────────────────────────────────────────┘
```

## 交互行为

### 1. 打开模态框

- 点击单词卡片
- 触发 `handleWordClick(wordId)`
- 模态框从底部滑入（带透明度渐变）

### 2. 关闭模态框

- 点击关闭按钮（右上角 ✗）
- 点击遮罩层（可选）
- 按 ESC 键
- 模态框向下滑出（带透明度渐变）

### 3. 滚动行为

- 内容区域独立滚动
- 最大高度限制（80vh）
- 平滑滚动效果

## 响应式设计

### 桌面端（≥768px）

- 最大宽度 xl (1280px)
- 4列网格布局（掌握度指标）
- 3列网格布局（复习间隔）

### 移动端（<768px）

- 全宽显示（带内边距）
- 2列网格布局（掌握度指标）
- 单列堆叠布局（复习间隔）
- 优化触摸交互

## 颜色语义

| 状态   | 颜色              | 含义                   |
| ------ | ----------------- | ---------------------- |
| 已掌握 | 绿色 (green-600)  | 完全掌握，可以长期保持 |
| 熟练   | 蓝色 (blue-600)   | 掌握较好，偶尔复习     |
| 学习中 | 黄色 (yellow-600) | 正在学习，需要持续练习 |
| 需复习 | 橙色 (orange-600) | 遗忘风险，建议尽快复习 |
| 未学习 | 灰色 (gray-500)   | 尚未学习               |

## 动画效果

### 入场动画

```javascript
initial: { opacity: 0, y: 20 }
animate: { opacity: 1, y: 0 }
transition: { delay: 0.1 * index } // 渐进式加载
```

### 退出动画

```javascript
exit: { opacity: 0, y: 20 }
transition: { duration: 0.2 }
```

## 性能优化

1. **懒加载**：只在打开模态框时加载数据
2. **并发请求**：使用 Promise.all 同时获取多个数据
3. **数据缓存**：避免重复加载相同数据
4. **限制渲染**：历史记录只显示最近10条
5. **防抖处理**：避免频繁打开/关闭

## 可访问性（a11y）

- ✓ 键盘导航支持（ESC关闭）
- ✓ ARIA属性（role="dialog", aria-modal="true"）
- ✓ 焦点管理（打开时锁定焦点）
- ✓ 屏幕阅读器友好的标签
- ✓ 高对比度支持
- ✓ 语义化HTML结构

## 使用场景

1. **学习回顾**：查看单词学习进度
2. **复习计划**：了解何时该复习
3. **问题诊断**：找出记忆薄弱环节
4. **学习激励**：查看学习成果
5. **数据分析**：教师/研究者分析学习数据
