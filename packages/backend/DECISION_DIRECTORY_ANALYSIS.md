# Decision ç›®å½•åˆ†ææŠ¥å‘Š

> **ä»»åŠ¡**: åˆå¹¶ src/amas/decision/ ç›®å½•åˆ° adapters/
>
> **ç»“è®º**: âœ… **ä¸åº”åˆ é™¤æˆ–åˆå¹¶**ï¼Œdecision/ æ˜¯ adapters/ çš„åˆç†å†…éƒ¨ä¾èµ–

---

## 1. æ‰§è¡Œæ‘˜è¦

ç»è¿‡å…¨é¢åˆ†æï¼Œ`src/amas/decision/` ç›®å½•æ˜¯ AMAS æ¶æ„ä¸­çš„**å†³ç­–å±‚æ ¸å¿ƒå®ç°**ï¼Œä¸ `adapters/` å½¢æˆäº†æ¸…æ™°çš„åˆ†å±‚å…³ç³»ï¼š

- **decision/**: å†³ç­–å±‚å†…éƒ¨å®ç°ï¼ˆå·¥å…·å’Œæ ¸å¿ƒç®—æ³•ï¼‰
- **adapters/**: ç»Ÿä¸€æ¥å£é€‚é…å±‚ï¼ˆå°è£…å’ŒæŠ½è±¡ï¼‰
- **å…³ç³»**: adapters/ å¤ç”¨ decision/ é¿å…é‡å¤å®ç°

### æ ¸å¿ƒå‘ç°

1. âœ… **è®¾è®¡åˆç†**: decision/ å’Œ adapters/ èŒè´£æ¸…æ™°ï¼Œä¸æ˜¯å†—ä½™ä»£ç 
2. âœ… **ä¾èµ–æ­£ç¡®**: åªæœ‰ `core/engine.ts` å’Œ `adapters/` å¯¼å…¥ decision/
3. âœ… **æ— éœ€é‡æ„**: ä¿æŒç°çŠ¶ï¼Œé€šè¿‡æ–‡æ¡£æ˜ç¡®æ¶æ„è¾¹ç•Œå³å¯
4. âš ï¸ **æ–‡æ¡£ä¸è¶³**: ç¼ºå°‘æ¶æ„è¯´æ˜ï¼Œå·²æ·»åŠ  README.md

---

## 2. ç›®å½•ç»“æ„åˆ†æ

### 2.1 decision/ ç›®å½•å†…å®¹

```
decision/
â”œâ”€â”€ ensemble.ts                      # é›†æˆå­¦ä¹ æ¡†æ¶ (2078è¡Œ)
â”œâ”€â”€ explain.ts                       # å¯è§£é‡Šæ€§å¼•æ“ (443è¡Œ)
â”œâ”€â”€ guardrails.ts                    # å®‰å…¨çº¦æŸæœºåˆ¶ (183è¡Œ)
â”œâ”€â”€ mapper.ts                        # åŠ¨ä½œæ˜ å°„å™¨ (173è¡Œ)
â”œâ”€â”€ fallback.ts                      # é™çº§ç­–ç•¥ (302è¡Œ)
â””â”€â”€ multi-objective-decision.ts      # å¤šç›®æ ‡ä¼˜åŒ–å†³ç­– (214è¡Œ)
```

**æ€»è®¡**: çº¦ 3,393 è¡Œä»£ç 

### 2.2 æ–‡ä»¶èŒè´£çŸ©é˜µ

| æ–‡ä»¶                          | åŠŸèƒ½         | ä½¿ç”¨è€…                                       | å¯å¤ç”¨æ€§ |
| ----------------------------- | ------------ | -------------------------------------------- | -------- |
| `ensemble.ts`                 | é›†æˆå­¦ä¹ æ¡†æ¶ | adapters/ensemble-adapter.ts, core/engine.ts | ä¸­       |
| `explain.ts`                  | å†³ç­–è§£é‡Šç”Ÿæˆ | core/engine.ts, amas/index.ts                | é«˜       |
| `guardrails.ts`               | å®‰å…¨çº¦æŸ     | core/engine.ts, amas/index.ts                | é«˜       |
| `mapper.ts`                   | åŠ¨ä½œæ˜ å°„     | core/engine.ts, amas/index.ts                | é«˜       |
| `fallback.ts`                 | é™çº§ç­–ç•¥     | core/engine.ts                               | ä¸­       |
| `multi-objective-decision.ts` | å¤šç›®æ ‡ä¼˜åŒ–   | core/engine.ts                               | ä¸­       |

---

## 3. ä¾èµ–å…³ç³»åˆ†æ

### 3.1 å¤–éƒ¨å¼•ç”¨ç»Ÿè®¡

é€šè¿‡ `grep -r "from ['\"]\.\*\/decision\/"` æœç´¢å‘ç°ï¼š

```
src/amas/index.ts                      âœ… å…¬å…±APIå¯¼å‡º
src/amas/core/engine.ts                âœ… æ ¸å¿ƒå¼•æ“ä½¿ç”¨
src/amas/adapters/ensemble-adapter.ts  âœ… é€‚é…å™¨å¤ç”¨
```

**æ€»è®¡**: 3 ä¸ªæ–‡ä»¶ï¼Œå…¨éƒ¨å±äºåˆç†çš„å†…éƒ¨ä¾èµ–

### 3.2 ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å¤–éƒ¨æœåŠ¡å±‚                          â”‚
â”‚   (åº”ä½¿ç”¨ adapters/ æˆ– AMASEngine)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           amas/index.ts (å…¬å…±API)             â”‚
â”‚   å¯¼å‡º: mapper, guardrails, explain, ensemble â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   core/engine.ts      â”‚   adapters/         â”‚
â”‚   (æ ¸å¿ƒç¼–æ’å±‚)         â”‚   (ç»Ÿä¸€æ¥å£å±‚)       â”‚
â”‚                       â”‚                     â”‚
â”‚   imports:            â”‚   imports:          â”‚
â”‚   â€¢ ensemble          â”‚   â€¢ ensemble        â”‚
â”‚   â€¢ mapper            â”‚                     â”‚
â”‚   â€¢ guardrails        â”‚                     â”‚
â”‚   â€¢ explain           â”‚                     â”‚
â”‚   â€¢ fallback          â”‚                     â”‚
â”‚   â€¢ multi-objective   â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           decision/ (å†³ç­–å±‚å†…éƒ¨å®ç°)           â”‚
â”‚   â€¢ é›†æˆå­¦ä¹ æ¡†æ¶                              â”‚
â”‚   â€¢ åŠ¨ä½œæ˜ å°„å™¨                                â”‚
â”‚   â€¢ å®‰å…¨çº¦æŸ                                  â”‚
â”‚   â€¢ å¯è§£é‡Šæ€§å¼•æ“                              â”‚
â”‚   â€¢ é™çº§ç­–ç•¥                                  â”‚
â”‚   â€¢ å¤šç›®æ ‡ä¼˜åŒ–                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. æ¶æ„è¯„ä¼°

### 4.1 âœ… åˆç†çš„è®¾è®¡

#### èŒè´£æ¸…æ™°

- **decision/**: å†³ç­–å±‚æ ¸å¿ƒé€»è¾‘å’Œé€šç”¨å·¥å…·
- **adapters/**: ç»Ÿä¸€æ¥å£å°è£…å’Œé€‚é…
- **core/engine**: æµç¨‹ç¼–æ’å’Œä¸šåŠ¡é€»è¾‘

#### é¿å…é‡å¤å®ç°

- `EnsembleAdapter` å¤ç”¨ `decision/ensemble.ts` çš„ 2078 è¡Œé›†æˆé€»è¾‘
- æ— éœ€é‡æ–°å®ç°å¤šå­¦ä¹ å™¨æŠ•ç¥¨ã€æƒé‡æ›´æ–°ã€å†·å¯åŠ¨ç®¡ç†

#### å·¥å…·å‡½æ•°å¤ç”¨

- `mapper.ts`: Action â†” StrategyParams åŒå‘æ˜ å°„
- `guardrails.ts`: çŠ¶æ€å®‰å…¨çº¦æŸï¼ˆç–²åŠ³ã€åŠ¨æœºã€æ³¨æ„åŠ›ä¿æŠ¤ï¼‰
- `explain.ts`: å†³ç­–å¯è§£é‡Šæ€§ï¼ˆå› ç´ åˆ†æã€å»ºè®®ç”Ÿæˆï¼‰
- è¿™äº›å·¥å…·å¯è¢«å¤šä¸ªæ¨¡å—å¤ç”¨ï¼Œä¸é™äº adapters/

### 4.2 âš ï¸ éœ€è¦ä¼˜åŒ–çš„ç‚¹

#### æ–‡æ¡£ä¸è¶³

- âŒ ç¼ºå°‘ `decision/README.md` è¯´æ˜æ¶æ„å®šä½
- âŒ `adapters/README.md` æœªè¯´æ˜ decision/ ä¾èµ–å…³ç³»
- âœ… **å·²è§£å†³**: åˆ›å»ºå®Œæ•´çš„ README.md

#### å…¬å…±APIæš´éœ²

- âš ï¸ `amas/index.ts` å¯¼å‡ºæ‰€æœ‰ decision/ å‡½æ•°
- âš ï¸ å¤–éƒ¨å¼€å‘è€…å¯èƒ½ä¸æ¸…æ¥šåº”ä½¿ç”¨ adapters/ è¿˜æ˜¯ decision/
- âœ… **å·²è§£å†³**: é€šè¿‡æ–‡æ¡£æ˜ç¡®ä½¿ç”¨è¾¹ç•Œ

---

## 5. é‡æ„æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šä¿æŒç°çŠ¶ + æ–‡æ¡£åŒ– âœ… **å·²é‡‡ç”¨**

#### ä¼˜ç‚¹

- âœ… æ— éœ€ä¿®æ”¹ä»£ç ï¼Œé›¶é£é™©
- âœ… é€šè¿‡æ–‡æ¡£æ˜ç¡®æ¶æ„è¾¹ç•Œ
- âœ… ä¿ç•™å·¥å…·å‡½æ•°çš„çµæ´»æ€§
- âœ… ä¸å½±å“ç°æœ‰åŠŸèƒ½

#### ç¼ºç‚¹

- éœ€è¦å›¢é˜Ÿéµå¾ªæ–‡æ¡£çº¦å®š

#### å®æ–½æ­¥éª¤

- âœ… æ·»åŠ  `decision/README.md`
- âœ… æ›´æ–° `adapters/README.md`
- ğŸ”² åœ¨æœåŠ¡å±‚æ·»åŠ  lint è§„åˆ™ï¼ˆå¯é€‰ï¼‰

### æ–¹æ¡ˆ Bï¼šåˆ›å»º decision/internal.ts

#### ä¼˜ç‚¹

- æ˜¾å¼æ ‡è®°ä¸ºå†…éƒ¨API

#### ç¼ºç‚¹

- éœ€è¦ä¿®æ”¹æ‰€æœ‰å¯¼å…¥è·¯å¾„
- å¢åŠ ç»´æŠ¤è´Ÿæ‹…
- å®é™…æ•ˆæœä¸æ–¹æ¡ˆAç›¸åŒ

### æ–¹æ¡ˆ Cï¼šç§»åŠ¨åˆ° core/decision/

#### ä¼˜ç‚¹

- ç›®å½•ç»“æ„æ›´æ¸…æ™°

#### ç¼ºç‚¹

- å¤§è§„æ¨¡é‡æ„ï¼ˆ10+ æ–‡ä»¶ï¼‰
- ç ´åç°æœ‰å¯¼å…¥
- é£é™©é«˜ï¼Œæ”¶ç›Šä½

---

## 6. å·²å®Œæˆçš„å·¥ä½œ

### 6.1 æ–‡æ¡£åˆ›å»º

#### âœ… decision/README.md

- æ¶æ„å®šä½è¯´æ˜
- å„æ–‡ä»¶èŒè´£è¯´æ˜
- ä¾èµ–å…³ç³»å›¾
- ä½¿ç”¨åŸåˆ™å’Œç¤ºä¾‹
- é‡æ„æ–¹æ¡ˆåˆ†æ

#### âœ… adapters/README.md æ›´æ–°

- æ·»åŠ  decision/ ç›®å½•è¯´æ˜ç« èŠ‚
- è¯´æ˜ä¸ºä»€ä¹ˆä¸åˆ é™¤ decision/
- æ˜ç¡®ä¾èµ–å…³ç³»å’Œè®¿é—®åŸåˆ™

### 6.2 ä»£ç éªŒè¯

#### TypeScript ç±»å‹æ£€æŸ¥

```bash
$ npx tsc --noEmit
âœ… decision/ ç›¸å…³ä»£ç æ— ç±»å‹é”™è¯¯
âš ï¸ å­˜åœ¨å…¶ä»–æ— å…³é”™è¯¯ï¼ˆnotification.service.tsç­‰ï¼‰
```

#### å¯¼å…¥è·¯å¾„æ£€æŸ¥

```bash
$ grep -r "from ['\"]\.\*\/decision\/" src/
âœ… ä»… 3 ä¸ªæ–‡ä»¶å¯¼å…¥ decision/ï¼Œå…¨éƒ¨åˆç†
âœ… æ— æœåŠ¡å±‚ç›´æ¥å¯¼å…¥ decision/
```

---

## 7. ä½¿ç”¨æŒ‡å—

### âœ… æ¨èç”¨æ³•

#### ä½¿ç”¨ adapters/ ç»Ÿä¸€æ¥å£

```typescript
// services/learning.service.ts
import { EnsembleAdapter } from '../amas/adapters';

const policy = new EnsembleAdapter();
const result = policy.selectAction(state, actions, features, context);
```

#### ä½¿ç”¨ AMASEngine

```typescript
// services/learning.service.ts
import { AMASEngine } from '../amas/core/engine';

const engine = new AMASEngine();
const result = await engine.processEvent(userId, event);
```

#### ä½¿ç”¨å…¬å…±å·¥å…·å‡½æ•°

```typescript
// å¦‚æœç¡®å®éœ€è¦ç›´æ¥ä½¿ç”¨å·¥å…·å‡½æ•°
import { generateExplanation, applyGuardrails, mapActionToStrategy } from '../amas'; // ä» amas/index.ts å¯¼å‡º
```

### âŒ ä¸æ¨èç”¨æ³•

#### ç›´æ¥å¯¼å…¥ decision/

```typescript
// âŒ ä¸æ¨è
import { mapActionToStrategy } from '../amas/decision/mapper';
import { EnsembleLearningFramework } from '../amas/decision/ensemble';
```

**åŸå› **: ç»•è¿‡é€‚é…å™¨å±‚ï¼Œè€¦åˆå†…éƒ¨å®ç°

---

## 8. ç»´æŠ¤å»ºè®®

### çŸ­æœŸï¼ˆå·²å®Œæˆï¼‰

- âœ… æ·»åŠ  decision/README.md
- âœ… æ›´æ–° adapters/README.md
- âœ… éªŒè¯ç±»å‹å’Œå¯¼å…¥

### ä¸­æœŸï¼ˆå¯é€‰ï¼‰

- ğŸ”² åœ¨æœåŠ¡å±‚æ·»åŠ  ESLint è§„åˆ™ç¦æ­¢ç›´æ¥å¯¼å…¥ decision/
- ğŸ”² åœ¨ CI ä¸­æ£€æŸ¥ä¸å½“çš„å¯¼å…¥è·¯å¾„
- ğŸ”² åœ¨å›¢é˜Ÿä»£ç å®¡æŸ¥ä¸­å¼ºè°ƒæ¶æ„è¾¹ç•Œ

### é•¿æœŸï¼ˆç›‘æ§ï¼‰

- å®šæœŸæ£€æŸ¥ decision/ çš„å¤–éƒ¨å¼•ç”¨
- ç¡®ä¿æ–°æœåŠ¡éµå¾ªæ¶æ„çº¦å®š
- è€ƒè™‘æ˜¯å¦éœ€è¦æ›´ä¸¥æ ¼çš„æ¨¡å—è¾¹ç•Œï¼ˆå¦‚ TypeScript project referencesï¼‰

---

## 9. æ€»ç»“

### æ ¸å¿ƒç»“è®º

**decision/ ç›®å½•æ˜¯åˆç†çš„æ¶æ„è®¾è®¡ï¼Œä¸åº”åˆ é™¤æˆ–åˆå¹¶åˆ° adapters/**

### ç†ç”±

1. **èŒè´£æ¸…æ™°**: decision/ æ˜¯å†³ç­–å±‚æ ¸å¿ƒå®ç°ï¼Œadapters/ æ˜¯æ¥å£é€‚é…å±‚
2. **é¿å…é‡å¤**: å¤ç”¨ 3,393 è¡Œä»£ç ï¼Œæ— éœ€åœ¨ adapters/ ä¸­é‡æ–°å®ç°
3. **ä¾èµ–æ­£ç¡®**: åªæœ‰ core/engine å’Œ adapters/ å¯¼å…¥ï¼Œæ— å¤–éƒ¨æœåŠ¡è€¦åˆ
4. **å·¥å…·å¤ç”¨**: mapper, guardrails, explain æ˜¯é€šç”¨å·¥å…·ï¼Œå¯è¢«å¤šæ¨¡å—ä½¿ç”¨
5. **é£é™©æœ€å°**: é€šè¿‡æ–‡æ¡£è€Œéé‡æ„æ˜ç¡®æ¶æ„ï¼Œé›¶é£é™©å®æ–½

### æœ€ç»ˆæ–¹æ¡ˆ

âœ… **é‡‡ç”¨æ–¹æ¡ˆ Aï¼šä¿æŒç°çŠ¶ + æ–‡æ¡£åŒ–**

- åˆ›å»º decision/README.md è¯´æ˜æ¶æ„å®šä½
- æ›´æ–° adapters/README.md è¯´æ˜ä¾èµ–å…³ç³»
- é€šè¿‡æ–‡æ¡£å’Œä»£ç å®¡æŸ¥ç¡®ä¿æ­£ç¡®ä½¿ç”¨

---

**åˆ†æå®Œæˆæ—¶é—´**: 2025-12-12
**åˆ†æäººå‘˜**: Claude (Sonnet 4.5)
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
